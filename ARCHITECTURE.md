# ๐ต Arquitectura de la Aplicaciรณn

## ๐ Diagrama de Flujo

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    SPOTIFY API (Datos)                          โ
โ                  https://api.spotify.com/v1                     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                             โ
                             โ HTTP Requests (HttpClient + HttpParams)
                             โ
                             โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                   SpotifyService (Singleton)                    โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ  โ โข searchTracks(query): Observable<Track[]>                โ  โ
โ  โ โข getTrack(id): Observable<Track>                         โ  โ
โ  โ โข setCurrentTrack(track)                                  โ  โ
โ  โ โข addToPlaylist(track)                                    โ  โ
โ  โ โข removeFromPlaylist(id)                                  โ  โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ                                                                  โ
โ  Observable Streams:                                             โ
โ  โข currentTrack$ (BehaviorSubject)                              โ
โ  โข playlist$ (BehaviorSubject)                                  โ
โโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโ
                     โ                    โ
                     โ                    โ
        โโโโโโโโโโโโโโ                    โโโโโโโโโโโโโโ
        โ                                              โ
        โผ                                              โผ
โโโโโโโโโโโโโโโโโโโ                          โโโโโโโโโโโโโโโโโโโ
โ  HomeComponent  โ                          โ SearchComponent โ
โ      (/)        โ                          โ    (/search)    โ
โโโโโโโโโโโโโโโโโโโค                          โโโโโโโโโโโโโโโโโโโค
โ โข Canciรณn actualโโโโโโโโRouterLinkโโโโโโโโโบโ โข Bรบsqueda      โ
โ โข Playlist      โ                          โ โข Resultados    โ
โ โข Controles     โ                          โ โข Controles     โ
โโโโโโโโโโโโโโโโโโโ                          โโโโโโโโโโโโโโโโโโโ
        โ                                              โ
        โ                                              โ
        โโโโโโโโโโโโโโโโ                  โโโโโโโโโโโโโ
                       โ                  โ
                       โผ                  โผ
              โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
              โ   TrackDetailComponent       โ
              โ      (/track/:id)            โ
              โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
              โ โข Detalle completo           โ
              โ โข Route Params (id)          โ
              โ โข Botรณn reproducir           โ
              โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

## ๐งฉ Componentes Principales

### 1๏ธโฃ AppComponent (Root)
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ          AppComponent              โ
โ  (Componente raรญz standalone)      โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ โข <router-outlet>                  โ
โ โข Contenedor principal             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### 2๏ธโฃ HomeComponent
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ โ  NAVBAR (Fixed Top)                                 โ  โ
โ โ  ๐ต Logo    [Inicio] [๐ Buscar]                    โ  โ
โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ                                                             โ
โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ โ   CANCIรN ACTUAL         โ  โ    PLAYLIST ACTUAL      โ โ
โ โ   (Izquierda - Grande)   โ  โ    (Derecha - Lista)    โ โ
โ โ                          โ  โ                         โ โ
โ โ  โโโโโโโโโโโโโโโโโโโโ    โ  โ  [๐ต Track 1]  [X]     โ โ
โ โ  โ   Album Cover    โ    โ  โ  [๐ต Track 2]  [X]     โ โ
โ โ  โ   (Imagen)       โ    โ  โ  [๐ต Track 3]  [X]     โ โ
โ โ  โโโโโโโโโโโโโโโโโโโโ    โ  โ  [๐ต Track 4]  [X]     โ โ
โ โ                          โ  โ                         โ โ
โ โ  Nombre de Canciรณn       โ  โ  (Scrollable)           โ โ
โ โ  Artista                 โ  โ                         โ โ
โ โ  รlbum                   โ  โ                         โ โ
โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ                                                             โ
โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ โ  CONTROLES (Fixed Bottom)                           โ  โ
โ โ  [โฎ๏ธ] [โถ๏ธ] [โญ๏ธ]  Nombre - Artista                   โ  โ
โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### 3๏ธโฃ SearchComponent
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ โ  BARRA DE BรSQUEDA (Fixed Top)                      โ  โ
โ โ  [_______Buscar canciones______] [๐] [โ Volver]   โ  โ
โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ                                                             โ
โ  โโโโโโโโโโโโโโโโโโ  RESULTADOS  โโโโโโโโโโโโโโโโโโโ       โ
โ  โ                                                  โ       โ
โ  โ  โโโโโโโโโโ  โโโโโโโโโโ  โโโโโโโโโโ  โโโโโโโโโโ โ      โ
โ  โ  โ Cover  โ  โ Cover  โ  โ Cover  โ  โ Cover  โ โ      โ
โ  โ  โ โถ๏ธ Playโ  โ โถ๏ธ Playโ  โ โถ๏ธ Playโ  โ โถ๏ธ Playโ โ      โ
โ  โ  โ Nombre โ  โ Nombre โ  โ Nombre โ  โ Nombre โ โ      โ
โ  โ  โ Artistaโ  โ Artistaโ  โ Artistaโ  โ Artistaโ โ      โ
โ  โ  โ รlbum  โ  โ รlbum  โ  โ รlbum  โ  โ รlbum  โ โ      โ
โ  โ  โโโโโโโโโโ  โโโโโโโโโโ  โโโโโโโโโโ  โโโโโโโโโโ โ      โ
โ  โ                                                  โ       โ
โ  โ  (Grid responsive con scroll)                   โ       โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ       โ
โ                                                             โ
โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ โ  CONTROLES (Fixed Bottom)                           โ  โ
โ โ  [โฎ๏ธ] [โถ๏ธ] [โญ๏ธ]                                     โ  โ
โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

## ๐ Flujo de Datos

### Bรบsqueda de Canciones
```
Usuario escribe bรบsqueda
        โ
        โผ
SearchComponent.onSearch()
        โ
        โผ
SpotifyService.searchTracks(query)
        โ
        โโโ HttpParams { q, type, limit }
        โ
        โผ
HTTP GET โ Spotify API
        โ
        โผ
Observable<Track[]>
        โ
        โผ
SearchComponent.searchResults = tracks
        โ
        โผ
Template muestra resultados
```

### Seleccionar Canciรณn
```
Usuario hace click en canciรณn
        โ
        โผ
Component.selectTrack(track)
        โ
        โผ
SpotifyService.setCurrentTrack(track)
        โ
        โโโ currentTrack$.next(track)
        โ
        โโโ addToPlaylist(track)
                โ
                โผ
        playlist$.next([...playlist, track])
        โ
        โผ
HomeComponent recibe actualizaciรณn
        โ
        โผ
Template se actualiza automรกticamente
```

### Navegaciรณn por ID
```
Usuario navega a /track/123
        โ
        โผ
Angular Router โ TrackDetailComponent
        โ
        โผ
ActivatedRoute.params.subscribe()
        โ
        โผ
trackId = params['id']  // Route Params
        โ
        โผ
SpotifyService.getTrack(trackId)
        โ
        โผ
HTTP GET โ Spotify API
        โ
        โผ
Observable<Track>
        โ
        โผ
Component muestra detalles
```

## ๐จ Sistema de Colores (Tonalidades Azules)

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  Paleta de Colores                          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  #0a1929  โโโโ  Fondo oscuro                โ
โ  #1a2980  โโโโ  Gradiente fondo             โ
โ  #1e3a8a  โโโโ  Navbar/Footer base          โ
โ  #1e40af  โโโโ  Navbar/Footer gradiente     โ
โ  #2563eb  โโโโ  Tarjetas/Hover              โ
โ  #3b82f6  โโโโ  Primario/Botones            โ
โ  #60a5fa  โโโโ  Tรญtulos/Acentos             โ
โ  #93c5fd  โโโโ  Texto secundario            โ
โ  #bfdbfe  โโโโ  Texto terciario             โ
โ  #e0e7ff  โโโโ  Texto principal             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

## ๐ฑ Layout Responsivo

### Desktop (> 1024px)
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ        NAVBAR (100% width)          โ
โโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโค
โ   CURRENT TRACK    โ   PLAYLIST     โ
โ      (70%)         โ     (30%)      โ
โ                    โ                โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ       CONTROLS (100% width)         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### Mobile (< 1024px)
```
โโโโโโโโโโโโโโโโโโโโโโโโค
โ   NAVBAR (100%)      โ
โโโโโโโโโโโโโโโโโโโโโโโโค
โ   CURRENT TRACK      โ
โ      (100%)          โ
โ   (Playlist hidden)  โ
โ                      โ
โโโโโโโโโโโโโโโโโโโโโโโโค
โ  CONTROLS (100%)     โ
โโโโโโโโโโโโโโโโโโโโโโโโ
```

## ๐ฃ๏ธ Rutas de la Aplicaciรณn

```typescript
routes = [
  { path: '', component: HomeComponent },
  { path: 'search', component: SearchComponent },
  { path: 'track/:id', component: TrackDetailComponent },
  { path: '**', redirectTo: '' }
]
```

### Navegaciรณn
- **Declarativa**: `<a routerLink="/search">Buscar</a>`
- **Programรกtica**: `router.navigate(['/track', trackId])`
- **Parรกmetros**: `route.params.subscribe(p => p['id'])`

## ๐ Autenticaciรณn con Spotify

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  Spotify Developer Dashboard                 โ
โ  โข Crear App                                 โ
โ  โข Obtener Client ID + Client Secret        โ
โโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                โ
                โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  OAuth 2.0 Client Credentials Flow           โ
โ  POST /api/token                             โ
โ  Body: grant_type=client_credentials         โ
โโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                โ
                โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  Access Token (vรกlido por 1 hora)            โ
โ  โข Usado en header: Authorization: Bearer   โ
โโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                โ
                โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  SpotifyService                              โ
โ  โข Todas las peticiones usan el token       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

Esta arquitectura permite:
- โ **Separaciรณn de responsabilidades**
- โ **Reutilizaciรณn de cรณdigo**
- โ **Mantenibilidad**
- โ **Escalabilidad**
- โ **Testing sencillo**
